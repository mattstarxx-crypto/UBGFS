<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBGFS - Unblocked Games</title>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0a0a; color: #fff; font-family: Arial, sans-serif; overflow-x: hidden; }
        
        .loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0a0a0a; display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 10000;
            transition: opacity 0.5s ease;
        }
        .loading-screen.hidden { opacity: 0; pointer-events: none; }
        .loader { width: 60px; height: 60px; border: 6px solid #1a1a1a; border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-text { margin-top: 20px; font-size: 1.2rem; letter-spacing: 4px; animation: pulse 1.5s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        .panic-btn {
            position: fixed; bottom: 20px; right: 20px; padding: 12px 20px;
            background: #ff0000; color: #fff; border: 2px solid #fff;
            font-family: 'Bungee', cursive; font-size: 0.9rem; cursor: pointer;
            z-index: 9999; box-shadow: 0 0 20px rgba(255,0,0,0.5); transition: all 0.3s; border-radius: 25px;
        }
        .panic-btn:hover { background: #cc0000; transform: scale(1.05); }

        .panic-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 9998; padding: 40px; overflow: auto; }
        .panic-screen.active { display: block; }
        .fake-doc { max-width: 800px; margin: 0 auto; color: #000; font-family: 'Times New Roman', serif; line-height: 2; }
        .fake-doc h1 { font-size: 1.8rem; text-align: center; margin-bottom: 30px; border-bottom: 2px solid #000; padding-bottom: 10px; }
        .fake-doc p { margin-bottom: 20px; text-indent: 40px; }

        .header-sticky {
            position: sticky; 
            top: 0; 
            background: linear-gradient(90deg, #000 0%, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%, #000 100%);
            background-size: 200% 200%;
            animation: gradientShiftSmooth 15s ease-in-out infinite;
            padding: 20px 25px;
            z-index: 1000; 
            border-bottom: 3px solid #fff;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            flex-wrap: wrap; 
            gap: 15px;
            position: relative;
            overflow: hidden;
        }
        .header-sticky::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
            animation: shineSmooth 6s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes gradientShiftSmooth {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @keyframes shineSmooth {
            0%, 100% { left: -100%; opacity: 0; }
            50% { left: 100%; opacity: 1; }
        }
        .logo-small { 
            font-family: 'Bungee', cursive; 
            font-size: 2.2rem; 
            color: #fff; 
            letter-spacing: 6px; 
            cursor: pointer; 
            text-shadow: 3px 3px 0 #333; 
            transition: all 0.3s;
            position: relative;
            z-index: 1;
        }
        .logo-small:hover { transform: scale(1.05); }

        .search-container { flex: 1; max-width: 400px; position: relative; z-index: 1; }
        .search-box { width: 100%; padding: 12px 45px 12px 15px; background: #1a1a1a; border: 2px solid #333; color: #fff; font-size: 1rem; transition: all 0.3s; border-radius: 25px; }
        .search-box:focus { outline: none; border-color: #fff; }
        .search-box::placeholder { color: #666; }
        .search-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #fff; pointer-events: none; }

        .nav-pills { display: flex; gap: 10px; flex-wrap: wrap; position: relative; z-index: 1; }
        .nav-pills a { padding: 10px 20px; background: #1a1a1a; color: #fff; text-decoration: none; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; transition: all 0.3s; border: 2px solid #333; font-size: 0.85rem; border-radius: 25px; }
        .nav-pills a:hover, .nav-pills a.active { background: #fff; color: #000; border-color: #fff; transform: translateY(-2px); }

        .fav-nav { padding: 10px 20px; background: #1a1a1a; color: #fff; text-decoration: none; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; transition: all 0.3s; border: 2px solid #333; font-size: 0.85rem; border-radius: 25px; position: relative; z-index: 1; }
        .fav-nav:hover, .fav-nav.active { background: #ff4444; color: #fff; border-color: #ff4444; transform: translateY(-2px); }

        .hero-banner { 
            background: linear-gradient(90deg, #000 0%, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%, #000 100%);
            background-size: 200% 200%;
            animation: gradientShiftSmooth 15s ease-in-out infinite;
            padding: 80px 30px; 
            text-align: center; 
            border-bottom: 3px solid #fff; 
            position: relative; 
            overflow: hidden;
        }
        .hero-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
            animation: shineSmooth 6s ease-in-out infinite;
            pointer-events: none;
        }
        .hero-title { 
            font-family: 'Bungee', cursive; 
            font-size: 3.5rem; 
            margin-bottom: 15px; 
            text-shadow: 4px 4px 0 #333;
            position: relative;
            z-index: 1;
        }
        .hero-subtitle { 
            font-size: 1.1rem; 
            letter-spacing: 2px; 
            opacity: 0.7;
            position: relative;
            z-index: 1;
        }
        .shortcut-hint { 
            margin-top: 20px; 
            font-size: 0.85rem; 
            opacity: 0.5;
            position: relative;
            z-index: 1;
        }
        .shortcut-hint kbd { background: #333; padding: 4px 8px; border-radius: 4px; margin: 0 3px; }

        .page-section { display: none; padding: 40px 30px 80px; min-height: 100vh; }
        .page-section.active { display: block; }

        .section-header { font-family: 'Bungee', cursive; font-size: 2.5rem; text-align: center; margin-bottom: 20px; letter-spacing: 6px; text-shadow: 3px 3px 0 #333; }

        .filter-bar { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 40px; }
        .filter-btn { padding: 8px 18px; background: #1a1a1a; color: #fff; border: 2px solid #333; cursor: pointer; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; transition: all 0.3s; border-radius: 25px; }
        .filter-btn:hover, .filter-btn.active { background: #fff; color: #000; border-color: #fff; }

        .games-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; max-width: 1400px; margin: 0 auto; }

        .game-card {
            background: linear-gradient(145deg, #111, #0a0a0a); color: #fff; padding: 0;
            position: relative; overflow: hidden; cursor: pointer; transition: all 0.4s;
            border: 2px solid #222; border-radius: 20px;
        }
        .game-card:hover { transform: translateY(-8px) scale(1.02); border-color: #fff; box-shadow: 0 15px 40px rgba(255,255,255,0.15); }
        
        .game-thumb { width: 100%; height: 160px; background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 50%, #111 100%); display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }
        .game-thumb::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); opacity: 0; transition: opacity 0.4s; }
        .game-card:hover .game-thumb::before { opacity: 1; }
        
        .game-icon-box { font-size: 4rem; color: #fff; filter: drop-shadow(0 0 20px rgba(255,255,255,0.3)); transition: transform 0.4s, filter 0.4s; }
        .game-card:hover .game-icon-box { transform: scale(1.15) rotate(5deg); filter: drop-shadow(0 0 30px rgba(255,255,255,0.5)); }

        .game-info { padding: 20px; }
        .game-name { font-family: 'Bungee', cursive; font-size: 1.3rem; letter-spacing: 1px; margin-bottom: 8px; }
        .game-desc { font-size: 0.8rem; opacity: 0.6; margin-bottom: 15px; line-height: 1.5; }
        .game-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 15px; }
        .game-tag { font-size: 0.65rem; padding: 4px 10px; background: #222; border-radius: 20px; text-transform: uppercase; letter-spacing: 1px; }
        .game-tag.trending { background: #fff; color: #000; font-weight: 700; }

        .play-badge { display: block; width: 100%; padding: 12px; background: #fff; color: #000; border: none; font-weight: 900; letter-spacing: 2px; text-transform: uppercase; font-size: 1rem; cursor: pointer; transition: all 0.3s; font-family: 'Bungee', cursive; border-radius: 0 0 18px 18px; }
        .play-badge:hover { background: #e0e0e0; }

        .fav-btn { position: absolute; top: 10px; right: 10px; width: 36px; height: 36px; background: rgba(0,0,0,0.7); border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s; z-index: 10; }
        .fav-btn:hover { background: rgba(255,255,255,0.2); transform: scale(1.1); }
        .fav-btn i { color: #666; font-size: 1rem; transition: color 0.3s; }
        .fav-btn.active i { color: #ff4444; }

        .game-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 5000; }
        .game-modal.active { display: flex; align-items: center; justify-content: center; }
        .modal-header { position: absolute; top: 0; left: 0; right: 0; padding: 15px 20px; background: #111; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; }
        .modal-title { font-family: 'Bungee', cursive; font-size: 1.2rem; }
        .modal-btns { display: flex; gap: 10px; }
        .modal-btn { padding: 10px 20px; border: 2px solid #fff; font-family: 'Bungee', cursive; font-size: 0.85rem; cursor: pointer; letter-spacing: 1px; transition: all 0.3s; border-radius: 25px; }
        .modal-btn.close { background: #ff0000; color: #fff; }
        .modal-btn.close:hover { background: #cc0000; }
        .modal-btn.fullscreen { background: #fff; color: #000; }
        .modal-btn.fullscreen:hover { background: #e0e0e0; }
        .modal-content { width: 100%; height: calc(100% - 60px); margin-top: 60px; position: relative; }
        .game-frame { width: 100%; height: 100%; border: none; }
        .frame-loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
        .frame-loader.hidden { display: none; }

        .no-results { text-align: center; padding: 60px 20px; }
        .no-results i { font-size: 4rem; color: #333; margin-bottom: 20px; display: block; }
        .no-results p { color: #666; font-size: 1.2rem; margin-bottom: 20px; }
        .suggested-games { margin-top: 30px; }
        .suggested-games h4 { color: #888; margin-bottom: 15px; font-size: 0.9rem; letter-spacing: 2px; }

        .footer-zone { 
            background: linear-gradient(90deg, #000 0%, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%, #000 100%);
            background-size: 200% 200%;
            animation: gradientShiftSmooth 15s ease-in-out infinite;
            padding: 40px; 
            text-align: center; 
            border-top: 3px solid #fff;
            position: relative;
            overflow: hidden;
        }
        .footer-zone::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
            animation: shineSmooth 6s ease-in-out infinite;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Removed duplicate animations - now using gradientShiftSmooth and shineSmooth defined above */
        .footer-zone p { 
            font-family: 'Bungee', cursive; 
            font-size: 1.1rem; 
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .quick-btn { padding:10px 18px; background:#1a1a1a; color:#fff; border:2px solid #333; cursor:pointer; font-size:0.85rem; font-weight:600; border-radius:25px; transition:all 0.3s; }
        .quick-btn:hover { background:#fff; color:#000; border-color:#fff; }

        .toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%) translateY(100px); background: #fff; color: #000; padding: 12px 24px; border-radius: 8px; font-weight: 600; opacity: 0; transition: all 0.3s; z-index: 9999; }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        @media (max-width: 768px) {
            .header-sticky { flex-direction: column; padding: 15px; }
            .logo-small { font-size: 1.8rem; }
            .hero-title { font-size: 2.2rem; }
            .section-header { font-size: 1.8rem; }
            .games-grid { grid-template-columns: 1fr; }
            .panic-btn { bottom: 10px; right: 10px; padding: 10px 15px; font-size: 0.8rem; }
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <div class="loading-text">LOADING...</div>
    </div>

    <button class="panic-btn" id="panicBtn"><i class="fas fa-exclamation-triangle"></i> PANIC</button>

    <div class="panic-screen" id="panicScreen">
        <div class="fake-doc">
            <h1>The Importance of Academic Excellence in Modern Education</h1>
            <p>Education plays a fundamental role in shaping the future of society. Throughout history, academic institutions have served as the cornerstone of knowledge dissemination and intellectual growth. The pursuit of excellence in education requires dedication, perseverance, and a commitment to lifelong learning.</p>
            <p>Students who engage actively with their coursework demonstrate higher levels of critical thinking and problem-solving abilities. Research has consistently shown that individuals who prioritize their education tend to achieve greater success in their professional careers and personal lives.</p>
            <p>Furthermore, the integration of technology in modern classrooms has revolutionized the way students access and process information. Digital resources provide unprecedented opportunities for collaborative learning and global connectivity.</p>
            <p style="margin-top:40px;font-size:0.9rem;opacity:0.5;text-align:center;">Press ESC to return</p>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <div class="main-content" id="mainContent">
        <div class="header-sticky">
            <div class="logo-small" onclick="showPage('home')">UBGFS</div>
            <div class="search-container">
                <input type="text" class="search-box" id="searchBox" placeholder="Search games..." oninput="searchGames()">
                <i class="fas fa-search search-icon"></i>
            </div>
            <div class="nav-pills">
                <a href="#" onclick="showPage('home')" class="nav-link active">HOME</a>
                <a href="#" onclick="showPage('games')" class="nav-link">GAMES</a>
                <a href="#" onclick="showPage('apps')" class="nav-link">APPS</a>
                <a href="#" onclick="showPage('proxy')" class="nav-link">PROXY</a>
            </div>
            <a href="#" onclick="showPage('favorites')" class="nav-link fav-nav"><i class="fas fa-heart"></i> FAVORITES</a>
        </div>

        <div class="page-section active" id="homePage">
            <div class="hero-banner">
                <div class="hero-title">UBGFS</div>
                <div class="hero-subtitle">Unblocked Games For School</div>
                <div class="shortcut-hint"><kbd>ESC</kbd> to close games ¬∑ <kbd>P</kbd> for panic mode</div>
                <div style="margin-top:30px; font-size:0.8rem; opacity:0.4; position:relative; z-index:1;">Created by Matthew</div>
            </div>
            <div style="padding: 50px 30px;">
                <div class="section-header" id="homeHeader"><i class="fas fa-fire" style="margin-right:10px;"></i>TOP PICKS</div>
                <div class="games-grid" id="homeGamesGrid"></div>
            </div>
        </div>

        <div class="page-section" id="gamesPage">
            <div class="section-header">ALL GAMES</div>
            <div class="filter-bar" id="filterBar"></div>
            <div class="games-grid" id="allGamesGrid"></div>
            <div class="no-results" id="noResults" style="display:none;">
                <i class="fas fa-gamepad"></i>
                <p>No games found for that search</p>
                <div class="suggested-games">
                    <h4>TRY THESE INSTEAD</h4>
                    <div class="games-grid" id="suggestedGrid" style="max-width:900px;"></div>
                </div>
            </div>
        </div>

        <div class="page-section" id="favoritesPage">
            <div class="section-header">‚ù§Ô∏è FAVORITES</div>
            <div class="games-grid" id="favoritesGrid"></div>
            <div class="no-results" id="noFavorites" style="display:none;">
                <i class="fas fa-heart-broken"></i>
                <p>No favorites yet! Click the heart on any game to save it.</p>
            </div>
        </div>

        <div class="page-section" id="appsPage">
            <div class="section-header">APPS & TOOLS</div>
            <div class="games-grid" id="appsGrid"></div>
        </div>

        <div class="page-section" id="proxyPage">
            <div class="section-header">üåê WEB PROXY</div>
            <div style="max-width:800px; margin:0 auto;">
                <div class="proxy-box" style="background:#111; padding:30px; border-radius:12px; border:2px solid #222; margin-bottom:30px;">
                    <p style="text-align:center; margin-bottom:20px; color:#aaa;">Enter any URL to browse anonymously</p>
                    <div style="display:flex; gap:10px; margin-bottom:20px;">
                        <input type="text" id="proxyInput" placeholder="Enter URL (e.g., youtube.com)" 
                            style="flex:1; padding:15px; background:#1a1a1a; border:2px solid #333; color:#fff; font-size:1rem; border-radius:8px;"
                            onkeypress="if(event.key==='Enter') loadProxy()">
                        <button onclick="loadProxy()" style="padding:15px 30px; background:#fff; color:#000; border:none; font-family:'Bungee',cursive; font-size:1rem; cursor:pointer; border-radius:8px; transition:all 0.3s;">
                            <i class="fas fa-globe"></i> GO
                        </button>
                    </div>
                    <div style="display:flex; flex-wrap:wrap; gap:8px; justify-content:center;">
                        <button onclick="quickProxy('youtube.com')" class="quick-btn">YouTube</button>
                        <button onclick="quickProxy('tiktok.com')" class="quick-btn">TikTok</button>
                        <button onclick="quickProxy('instagram.com')" class="quick-btn">Instagram</button>
                        <button onclick="quickProxy('reddit.com')" class="quick-btn">Reddit</button>
                        <button onclick="quickProxy('twitch.tv')" class="quick-btn">Twitch</button>
                        <button onclick="quickProxy('twitter.com')" class="quick-btn">Twitter</button>
                    </div>
                </div>

                <div id="proxyContainer" style="display:none; background:#000; border:3px solid #fff; border-radius:12px; overflow:hidden;">
                    <div style="background:#111; padding:12px 15px; display:flex; align-items:center; gap:10px; border-bottom:2px solid #333;">
                        <button onclick="closeProxy()" style="padding:10px 20px; background:#ff0000; color:#fff; border:none; font-family:'Bungee',cursive; cursor:pointer; border-radius:6px;">
                            <i class="fas fa-times"></i> CLOSE
                        </button>
                        <button onclick="toggleProxyFullscreen()" style="padding:10px 20px; background:#fff; color:#000; border:none; font-family:'Bungee',cursive; cursor:pointer; border-radius:6px;">
                            <i class="fas fa-expand"></i>
                        </button>
                        <span id="proxyUrl" style="flex:1; color:#888; font-size:0.85rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;"></span>
                    </div>
                    <iframe id="proxyFrame" style="width:100%; height:70vh; border:none; background:#fff;"></iframe>
                </div>

                <div style="margin-top:30px; padding:20px; background:#111; border-radius:12px; border:2px solid #222;">
                    <h4 style="color:#fff; margin-bottom:10px;">‚ö†Ô∏è Heads up</h4>
                    <ul style="color:#888; font-size:0.9rem; line-height:1.8; padding-left:20px;">
                        <li>Some sites block iframe embedding and won't work</li>
                        <li>For best results, use simple URLs without https://</li>
                        <li>This uses free proxy services - not 100% private</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer-zone">
            <p>UBGFS - Unblocked Games For School</p>
        </div>
    </div>

    <div class="game-modal" id="gameModal">
        <div class="modal-header">
            <div class="modal-title" id="modalTitle">Loading...</div>
            <div class="modal-btns">
                <button class="modal-btn fullscreen" onclick="toggleFullscreen()"><i class="fas fa-expand"></i> FULLSCREEN</button>
                <button class="modal-btn close" onclick="closeGame()"><i class="fas fa-times"></i> CLOSE</button>
            </div>
        </div>
        <div class="modal-content">
            <div class="frame-loader" id="frameLoader">
                <div class="loader"></div>
                <p style="margin-top:15px;opacity:0.7;">Loading game...</p>
            </div>
            <iframe class="game-frame" id="gameFrame" src="" onload="hideFrameLoader()"></iframe>
        </div>
    </div>

    <script>
        const games = [
            { name: 'SLOPE', icon: 'fas fa-snowboarding', desc: 'Roll down the neon slope at breakneck speeds!', url: 'https://slope-game.github.io/runnaz/slope/index.html', category: 'action', trending: true },
            { name: '1V1.LOL', icon: 'fas fa-crosshairs', desc: 'Build, shoot, dominate. Ultimate battle royale.', url: 'https://1v1.lol', category: 'action', trending: true },
            { name: 'DRIFT BOSS', icon: 'fas fa-car-side', desc: 'Master the art of drifting. One button, pure adrenaline.', url: 'https://driftboss.github.io/', category: 'racing', trending: false },
            { name: 'COOKIE CLICKER', icon: 'fas fa-cookie-bite', desc: 'Click your way to cookie empire domination.', url: 'https://orteil.dashnet.org/cookieclicker/', category: 'idle', trending: true },
            { name: 'TETRIS', icon: 'fas fa-cubes', desc: 'The timeless classic. Stack blocks, clear lines.', url: 'https://tetris.com/play-tetris', category: 'puzzle', trending: false },
            { name: 'RUN 3', icon: 'fas fa-running', desc: 'Defy gravity through an infinite cosmic tunnel.', url: 'https://run3.io', category: 'action', trending: true },
            { name: 'GEOMETRY DASH', icon: 'fas fa-shapes', desc: 'Rhythm-based platforming at its finest.', url: 'https://scratch.mit.edu/projects/embed/105500895/', category: 'action', trending: true },
            { name: 'RETRO BOWL', icon: 'fas fa-football-ball', desc: 'Manage your team in this retro football masterpiece.', url: 'https://retrobowl.github.io/', category: 'sports', trending: true },
            { name: 'BASKETBALL STARS', icon: 'fas fa-basketball-ball', desc: 'Show off your skills in 1v1 basketball matches.', url: 'https://basketball-stars.io/', category: 'sports', trending: false },
            { name: 'MOTO X3M', icon: 'fas fa-motorcycle', desc: 'Race through deadly obstacle courses on your bike.', url: 'https://motox3m.github.io/', category: 'racing', trending: false },
            { name: 'TUNNEL RUSH', icon: 'fas fa-circle-notch', desc: 'Dodge obstacles at insane speeds. Pure reflex test.', url: 'https://tunnelrush.github.io/', category: 'action', trending: true },
            { name: '2048', icon: 'fas fa-th', desc: 'Merge tiles to reach 2048. Addictive puzzle fun.', url: 'https://play2048.co/', category: 'puzzle', trending: false },
            { name: 'SUBWAY SURFERS', icon: 'fas fa-subway', desc: 'Run, jump, surf through subway tracks!', url: 'https://poki.com/en/g/subway-surfers', category: 'action', trending: true },
            { name: 'FLAPPY BIRD', icon: 'fas fa-dove', desc: 'The classic rage game. Tap to flap!', url: 'https://flappybird.io/', category: 'action', trending: false },
            { name: 'SNAKE', icon: 'fas fa-dragon', desc: 'Classic snake game. Eat, grow, don\'t crash!', url: 'https://www.google.com/fbx?fbx=snake_arcade', category: 'puzzle', trending: false },
            { name: 'PACMAN', icon: 'fas fa-ghost', desc: 'Eat dots, avoid ghosts. Classic arcade action!', url: 'https://www.google.com/logos/2010/pacman10-i.html', category: 'action', trending: false }
        ];

        const apps = [
            { name: 'YOUTUBE', icon: 'fab fa-youtube', desc: 'Watch videos, music, and more.', url: 'https://www.youtube.com', category: 'media' },
            { name: 'DISCORD', icon: 'fab fa-discord', desc: 'Chat with friends and communities.', url: 'https://discord.com/app', category: 'social' },
            { name: 'SPOTIFY', icon: 'fab fa-spotify', desc: 'Stream millions of songs and podcasts.', url: 'https://open.spotify.com', category: 'media' },
            { name: 'REDDIT', icon: 'fab fa-reddit', desc: 'The front page of the internet.', url: 'https://www.reddit.com', category: 'social' },
            { name: 'CALCULATOR', icon: 'fas fa-calculator', desc: 'Quick and easy online calculator.', url: 'https://www.desmos.com/scientific', category: 'tools' },
            { name: 'TRANSLATE', icon: 'fas fa-language', desc: 'Translate text between languages instantly.', url: 'https://translate.google.com', category: 'tools' }
        ];

        const categories = ['all', ...new Set(games.map(g => g.category))];
        let favorites = [];
        let currentFilter = 'all';

        // Load favorites from memory (simulating localStorage)
        function loadFavorites() {
            // In a real scenario this would use localStorage
            // favorites = JSON.parse(localStorage.getItem('ubgfs_favorites') || '[]');
        }

        function saveFavorites() {
            // localStorage.setItem('ubgfs_favorites', JSON.stringify(favorites));
        }

        function toggleFavorite(e, name) {
            e.stopPropagation();
            const idx = favorites.indexOf(name);
            if (idx > -1) {
                favorites.splice(idx, 1);
                showToast('Removed from favorites');
            } else {
                favorites.push(name);
                showToast('Added to favorites! ‚ù§Ô∏è');
            }
            saveFavorites();
            populateAll();
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        function createGameCard(game, isApp = false) {
            const isFav = favorites.includes(game.name);
            const tags = [];
            if (game.trending) tags.push('<span class="game-tag trending"><i class="fas fa-fire" style="margin-right:4px;"></i>HOT</span>');
            if (game.category) tags.push(`<span class="game-tag">${game.category}</span>`);
            
            return `
                <div class="game-card" onclick="playGame('${game.url}', '${game.name}')">
                    ${!isApp ? `<button class="fav-btn ${isFav ? 'active' : ''}" onclick="toggleFavorite(event, '${game.name}')"><i class="fas fa-heart"></i></button>` : ''}
                    <div class="game-thumb">
                        <div class="game-icon-box"><i class="${game.icon}"></i></div>
                    </div>
                    <div class="game-info">
                        <div class="game-name">${game.name}</div>
                        <div class="game-desc">${game.desc}</div>
                        <div class="game-tags">${tags.join('')}</div>
                    </div>
                    <button class="play-badge"><i class="fas fa-play"></i> PLAY</button>
                </div>
            `;
        }

        function populateAll() {
            document.getElementById('homeGamesGrid').innerHTML = games.filter(g => g.trending).slice(0, 6).map(g => createGameCard(g)).join('');
            document.getElementById('allGamesGrid').innerHTML = getFilteredGames().map(g => createGameCard(g)).join('');
            document.getElementById('appsGrid').innerHTML = apps.map(a => createGameCard(a, true)).join('');
            
            const favGames = games.filter(g => favorites.includes(g.name));
            document.getElementById('favoritesGrid').innerHTML = favGames.map(g => createGameCard(g)).join('');
            document.getElementById('noFavorites').style.display = favGames.length ? 'none' : 'block';
            document.getElementById('favoritesGrid').style.display = favGames.length ? 'grid' : 'none';

            // Filter buttons
            document.getElementById('filterBar').innerHTML = categories.map(c => 
                `<button class="filter-btn ${currentFilter === c ? 'active' : ''}" onclick="setFilter('${c}')">${c.toUpperCase()}</button>`
            ).join('');
        }

        function getFilteredGames() {
            const search = document.getElementById('searchBox').value.toLowerCase();
            return games.filter(g => {
                const matchSearch = g.name.toLowerCase().includes(search) || g.desc.toLowerCase().includes(search);
                const matchFilter = currentFilter === 'all' || g.category === currentFilter;
                return matchSearch && matchFilter;
            });
        }

        function setFilter(cat) {
            currentFilter = cat;
            populateAll();
            searchGames();
        }

        function searchGames() {
            const search = document.getElementById('searchBox').value.toLowerCase();
            const filtered = getFilteredGames();
            
            // Update games page
            const grid = document.getElementById('allGamesGrid');
            const noResults = document.getElementById('noResults');
            
            if (filtered.length === 0) {
                grid.style.display = 'none';
                noResults.style.display = 'block';
                document.getElementById('suggestedGrid').innerHTML = games.slice(0, 3).map(g => createGameCard(g)).join('');
            } else {
                grid.style.display = 'grid';
                noResults.style.display = 'none';
                grid.innerHTML = filtered.map(g => createGameCard(g)).join('');
            }
            
            // Also update home page grid if searching
            if (search) {
                document.getElementById('homeHeader').innerHTML = 'üîç Results for "' + document.getElementById('searchBox').value + '"';
                document.getElementById('homeGamesGrid').innerHTML = filtered.slice(0, 6).map(g => createGameCard(g)).join('');
            } else {
                document.getElementById('homeHeader').innerHTML = '<i class="fas fa-fire" style="margin-right:10px;"></i>TOP PICKS';
                document.getElementById('homeGamesGrid').innerHTML = games.filter(g => g.trending).slice(0, 6).map(g => createGameCard(g)).join('');
            }
        }

        function playGame(url, name) {
            document.getElementById('modalTitle').textContent = name;
            document.getElementById('frameLoader').classList.remove('hidden');
            document.getElementById('gameFrame').src = url;
            document.getElementById('gameModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function hideFrameLoader() {
            document.getElementById('frameLoader').classList.add('hidden');
        }

        function closeGame() {
            document.getElementById('gameFrame').src = '';
            document.getElementById('gameModal').classList.remove('active');
            document.body.style.overflow = 'auto';
            if (document.fullscreenElement) document.exitFullscreen();
        }

        function toggleFullscreen() {
            const modal = document.getElementById('gameModal');
            if (!document.fullscreenElement) modal.requestFullscreen?.();
            else document.exitFullscreen?.();
        }

        function showPage(page) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            
            document.getElementById(page + 'Page').classList.add('active');
            
            if (page === 'favorites') {
                document.querySelector('.fav-nav').classList.add('active');
            } else {
                const pages = { home: 0, games: 1, apps: 2, proxy: 3 };
                if (pages[page] !== undefined) {
                    document.querySelectorAll('.nav-pills .nav-link')[pages[page]].classList.add('active');
                }
            }
            
            if (page === 'games') searchGames();
        }

        function loadProxy() {
            let url = document.getElementById('proxyInput').value.trim();
            if (!url) { showToast('Enter a URL first!'); return; }
            if (!url.startsWith('http')) url = 'https://' + url;
            
            const proxyUrl = 'https://www.croxyproxy.com/browse.php?u=' + encodeURIComponent(url);
            document.getElementById('proxyFrame').src = proxyUrl;
            document.getElementById('proxyUrl').textContent = url;
            document.getElementById('proxyContainer').style.display = 'block';
            document.getElementById('proxyContainer').scrollIntoView({ behavior: 'smooth' });
        }

        function quickProxy(url) {
            document.getElementById('proxyInput').value = url;
            loadProxy();
        }

        function closeProxy() {
            document.getElementById('proxyFrame').src = '';
            document.getElementById('proxyContainer').style.display = 'none';
            document.getElementById('proxyInput').value = '';
            if (document.fullscreenElement) document.exitFullscreen();
        }

        function toggleProxyFullscreen() {
            const container = document.getElementById('proxyContainer');
            if (!document.fullscreenElement) container.requestFullscreen?.();
            else document.exitFullscreen?.();
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') {
                if (document.getElementById('gameModal').classList.contains('active')) closeGame();
                if (document.getElementById('panicScreen').classList.contains('active')) {
                    document.getElementById('panicScreen').classList.remove('active');
                    document.getElementById('mainContent').style.display = 'block';
                    document.getElementById('panicBtn').style.display = 'block';
                }
            }
            if (e.key.toLowerCase() === 'p' && !e.target.matches('input')) {
                document.getElementById('panicBtn').click();
            }
        });

        // Panic button
        document.getElementById('panicBtn').addEventListener('click', function() {
            document.getElementById('panicScreen').classList.add('active');
            document.getElementById('mainContent').style.display = 'none';
            this.style.display = 'none';
        });

        // Init
        window.addEventListener('load', () => {
            loadFavorites();
            populateAll();
            setTimeout(() => document.getElementById('loadingScreen').classList.add('hidden'), 1000);
        });
    </script>
</body>
</html>
